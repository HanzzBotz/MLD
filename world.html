<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malin Kundang Adventure</title>
</head>
<body>
    <style>
        * {
            margin: 10px;
            padding: 0;
            overflow: hidden;
        }
        #game {
            background-color: lightskyblue;
        }
        #isi {
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
    <div id="isi">
        <canvas id="game"></canvas>
    </div>
    <script>
        const canvas = document.getElementById("game")
        canvas.width = 500;
        canvas.height = 500;
        const g = canvas.getContext('2d')
        let mc = {x: 250, y: 270}
        let health = 100;
        let hunger = 100;
        let arah = "kanan";
        let objek = {x: Math.floor(Math.random() * 480) + 20, y: 250}
        const img = new Image()
        img.src = "tree.png"

        function draw() {
            g.clearRect(0, 0, canvas.width, canvas.height)
            g.drawImage(img, objek.x, objek.y - 80, 100, 148)
            g.fillStyle = "black"
            g.font = "24px Arial"
            g.textBaseline = "top"
            g.textAlign = "left"
            g.fillText(`❤ ${health}`, 10, 10)
            g.fillText(`🍗${hunger}`, 8, 35)
            g.fillStyle = "green"
            g.fillRect(0, 300, canvas.width, canvas.height)
            g.fillStyle = "rgb(58, 16, 2)"
            g.fillRect(0, 320, canvas.width, canvas.height)
            g.fillStyle = "rgb(71, 71, 71)"
            g.fillRect(mc.x, mc.y, 20, 30)
            g.beginPath();
            g.arc(mc.x + 10, mc.y + 2, 10, 0, 2 * Math.PI);
            g.fill();
            if(mc.x == canvas.width) {  
                mc.x = 10
                objek = {x: Math.floor(Math.random() * 480) + 20, y: 250}
            } else if (mc.x == 0) {
                mc.x = canvas.width - 10
                objek = {x: Math.floor(Math.random() * 480) + 20, y: 250}
            } 
            if (arah === "kanan") {
                g.beginPath();
                g.fillStyle = "white"
                g.arc(mc.x + 15, mc.y + 5, 2, 0, 2 * Math.PI);
                g.fill();
            } else if(arah === "kiri") {
                g.beginPath();
                g.fillStyle = "white"
                g.arc(mc.x + 5, mc.y + 5, 2, 0, 2 * Math.PI);
                g.fill();
            }
        }
        document.addEventListener("keydown", (e) => {
            console.log(e.key)
        switch (e.key) {
            case "ArrowRight":
                mc.x += 10
                arah = "kanan"
            break;
            case "ArrowLeft":
                arah = "kiri"
                mc.x -= 10
            break;
            case " ":
                
            break;
        }
        })

        function loop() {
        draw()
        requestAnimationFrame(loop)
        }

        loop()
    </script>
</body>
</html>